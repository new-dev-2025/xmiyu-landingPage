<!doctype html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>蜜欲 应用 - 安卓下载</title>
    <link rel="stylesheet" href="./style.css">
  </head>
  <body class="android-page">
    <div id="app">
      <div class="android-container">
        <div class="header">
          <div class="logo">
            <img src="/logo.png" alt="蜜欲 Logo" class="logo-image">
          </div>
          <h1 class="app-title">蜜欲 安卓版</h1>
        </div>

        <div class="android-content">
          <div class="download-section">
            <h2>下载 蜜欲 安卓应用</h2>
            <p class="description">获取适用于您安卓设备的最新版 蜜欲 应用</p>
            
            <button class="install-button android-btn" data-download="android">
              <span class="android-icon">📱</span>
              立即下载 APK
            </button>
          </div>
        </div>
      </div>
    </div>
    <script type="module">
      import { getConfig } from './config.js';

      // Function to open URL with mobile compatibility
      function openURL(url) {
        // On mobile, use location.href for better compatibility
        if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
          window.location.href = url;
        } else {
          window.open(url, '_blank');
        }
      }

      // Function to trigger automatic APK download
      async function downloadAPK() {
        const config = await getConfig();
        
        // Create a temporary anchor element for download
        const link = document.createElement('a');
        link.href = config.urls.androidApk;
        link.download = '蜜欲App.apk'; // Specify filename for download
        link.style.display = 'none';
        
        // Add to DOM, click, and remove
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        // Also open in new tab as fallback for some browsers
        openURL(config.urls.androidApk);
      }

      // Add event listeners
      document.addEventListener('DOMContentLoaded', () => {
        const androidButtons = document.querySelectorAll('.android-btn');
        androidButtons.forEach(button => {
          button.addEventListener('click', (e) => {
            e.preventDefault();
            downloadAPK();
          });
        });
      });
    </script>
    </script>
  </body>
</html>
